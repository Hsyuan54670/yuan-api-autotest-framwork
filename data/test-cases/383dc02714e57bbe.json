{"uid":"383dc02714e57bbe","name":"上传文件-正常场景-文件上传成功","fullName":"testcases.test_upload_api.TestUploadAPI#test_upload_file_success","historyId":"916c41807c8e681f1fcf23d57c758cab","time":{"start":1771745414692,"stop":1771745414693,"duration":1},"description":"验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200","descriptionHtml":"<p>验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200</p>\n","status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: 'docx/项目1.docx'","statusTrace":"self = <test_upload_api.TestUploadAPI object at 0x7fe6fcac6b70>\ndata = {'allure': {'description': '验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200', 'epic': '项目管理平台', 'feature': '文件管理模块', 'pytest_mark'...tus_code': 200}, 'request': {'files': {'path': 'docx/项目1.docx'}, 'headers': None, 'method': 'POST', 'url': '/upload'}}}\nget_user_token = <requests.sessions.Session object at 0x7fe6fca03230>\n\n    @pytest.mark.final\n    @pytest.mark.file\n    @pytest.mark.api\n    @pytest.mark.parametrize(\"data\", get_testcases(\"data/ai_testcases/file\"))\n    def test_upload_file_success(self,data, get_user_token):\n        runner = ApiRunner(data, get_user_token)\n>       runner.run()\n\ntestcases/test_upload_api.py:17: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncommon/api_utils.py:88: in run\n    self.core(k,v)\ncommon/api_utils.py:70: in core\n    self.resp=self.send_request(**v)\n              ^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <common.api_utils.ApiRunner object at 0x7fe6fca00dd0>\nkwargs = {'files': {'path': 'docx/项目1.docx'}, 'headers': None, 'method': 'POST', 'url': 'http://115.191.47.61/api/upload'}\n\n    def send_request(self, **kwargs):\n        try:\n            kwargs[\"url\"] = SERVER_URL + kwargs.get(\"url\", \"\")\n            if kwargs.get(\"files\"):\n                # 处理文件路径中的动态参数\n                logger.info(f'正在处理文件上传，原始文件路径: {kwargs[\"files\"][\"path\"]}')\n>               with open(kwargs[\"files\"][\"path\"], \"rb\") as f:\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE               FileNotFoundError: [Errno 2] No such file or directory: 'docx/项目1.docx'\n\ncommon/api_utils.py:30: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_and_teardown","time":{"start":1771745398089,"stop":1771745398089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_user_token","time":{"start":1771745414131,"stop":1771745414692,"duration":561},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200","status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: 'docx/项目1.docx'","statusTrace":"self = <test_upload_api.TestUploadAPI object at 0x7fe6fcac6b70>\ndata = {'allure': {'description': '验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200', 'epic': '项目管理平台', 'feature': '文件管理模块', 'pytest_mark'...tus_code': 200}, 'request': {'files': {'path': 'docx/项目1.docx'}, 'headers': None, 'method': 'POST', 'url': '/upload'}}}\nget_user_token = <requests.sessions.Session object at 0x7fe6fca03230>\n\n    @pytest.mark.final\n    @pytest.mark.file\n    @pytest.mark.api\n    @pytest.mark.parametrize(\"data\", get_testcases(\"data/ai_testcases/file\"))\n    def test_upload_file_success(self,data, get_user_token):\n        runner = ApiRunner(data, get_user_token)\n>       runner.run()\n\ntestcases/test_upload_api.py:17: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncommon/api_utils.py:88: in run\n    self.core(k,v)\ncommon/api_utils.py:70: in core\n    self.resp=self.send_request(**v)\n              ^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <common.api_utils.ApiRunner object at 0x7fe6fca00dd0>\nkwargs = {'files': {'path': 'docx/项目1.docx'}, 'headers': None, 'method': 'POST', 'url': 'http://115.191.47.61/api/upload'}\n\n    def send_request(self, **kwargs):\n        try:\n            kwargs[\"url\"] = SERVER_URL + kwargs.get(\"url\", \"\")\n            if kwargs.get(\"files\"):\n                # 处理文件路径中的动态参数\n                logger.info(f'正在处理文件上传，原始文件路径: {kwargs[\"files\"][\"path\"]}')\n>               with open(kwargs[\"files\"][\"path\"], \"rb\") as f:\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE               FileNotFoundError: [Errno 2] No such file or directory: 'docx/项目1.docx'\n\ncommon/api_utils.py:30: FileNotFoundError","steps":[],"attachments":[{"uid":"ac520f581b9fbfb6","name":"log","source":"ac520f581b9fbfb6.txt","type":"text/plain","size":456}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"get_user_token::0","time":{"start":1771745424132,"stop":1771745424133,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_and_teardown::0","time":{"start":1771745424133,"stop":1771745424133,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"项目管理平台"},{"name":"feature","value":"文件管理模块"},{"name":"story","value":"上传文件"},{"name":"tag","value":"正常场景"},{"name":"tag","value":"冒烟用例"},{"name":"tag","value":"api"},{"name":"tag","value":"file"},{"name":"tag","value":"final"},{"name":"parentSuite","value":"testcases"},{"name":"suite","value":"test_upload_api"},{"name":"subSuite","value":"TestUploadAPI"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"2423-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcases.test_upload_api"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"data","value":"{'allure': {'title': '上传文件-正常场景-文件上传成功', 'description': '验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200', 'epic': '项目管理平台', 'feature': '文件管理模块', 'story': '上传文件', 'tag': ['正常场景', '冒烟用例'], 'pytest_mark': 'smoke'}, 'steps': {'request': {'method': 'POST', 'url': '/upload', 'headers': None, 'files': {'path': 'docx/项目1.docx'}}, 'expected': {'status_code': 200, 'response': {'code': 200, 'msg': 'success', 'data': None}}}}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["file","正常场景","final","冒烟用例","api"]},"source":"383dc02714e57bbe.json","parameterValues":["{'allure': {'title': '上传文件-正常场景-文件上传成功', 'description': '验证用户上传文件到对象存储，接口正常返回文件URL，业务响应码为200', 'epic': '项目管理平台', 'feature': '文件管理模块', 'story': '上传文件', 'tag': ['正常场景', '冒烟用例'], 'pytest_mark': 'smoke'}, 'steps': {'request': {'method': 'POST', 'url': '/upload', 'headers': None, 'files': {'path': 'docx/项目1.docx'}}, 'expected': {'status_code': 200, 'response': {'code': 200, 'msg': 'success', 'data': None}}}}"]}