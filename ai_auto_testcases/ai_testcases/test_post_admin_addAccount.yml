addAccount_normal_correct_data:
  allure:
    title: "添加账户-正常场景-正确数据添加成功"
    description: "验证使用有效的账户数据调用添加账户接口，能成功创建账户，返回业务码200"
    epic: "后台管理系统"
    feature: "账户管理模块"
    story: "添加账户接口"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
      params: {}
      json:
        username: "test_user"
        password: "Password123!"
        userType: "admin"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "操作成功"
        data:
          required_fields: ["id", "username", "userType"]
          assert:
            eq:
              username: "test_user"
              userType: "admin"
            type:
              id: "int"
              username: "str"
              userType: "str"
    extract:
      new_account_id: $.data.id
addAccount_abnormal_missing_username:
  allure:
    title: "添加账户-异常场景-缺少用户名"
    description: "验证调用添加账户接口时缺少username参数，接口返回参数错误"
    epic: "后台管理系统"
    feature: "账户管理模块"
    story: "添加账户接口"
    tag: ["异常场景", "参数校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
      params: {}
      json:
        password: "Password123!"
        userType: "admin"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "username is required"
        data:
          assert:
            eq: {}
addAccount_boundary_username_max_length:
  allure:
    title: "添加账户-边界场景-用户名最大长度255字符"
    description: "验证用户名为255个字符时，添加账户接口能正确处理并创建账户"
    epic: "后台管理系统"
    feature: "账户管理模块"
    story: "添加账户接口"
    tag: ["边界场景", "参数校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
      params: {}
      json:
        username: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
        password: "Password123!"
        userType: "admin"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "操作成功"
        data:
          required_fields: ["id", "username", "userType"]
          assert:
            regex:
              username: "^a{255}$"
            type:
              id: "int"
              username: "str"
              userType: "str"