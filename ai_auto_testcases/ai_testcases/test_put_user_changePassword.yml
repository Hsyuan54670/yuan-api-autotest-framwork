change_password_normal_success:
  allure:
    title: "修改密码-正常场景-成功修改密码"
    description: "验证用户使用有效的用户名和新密码修改密码，接口返回成功响应，业务码为200"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "修改密码功能"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "PUT"
      url: "/user/changePassword"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json:
        username: "test_user"
        password: "NewPass123"
        id: 1
        userType: "user"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "密码修改成功"
        data: {}
        assert:
          eq:
            code: 200
            msg: "密码修改成功"
          type:
            code: int
            msg: str
            data: dict

change_password_abnormal_invalid_password:
  allure:
    title: "修改密码-异常场景-密码不符合规则"
    description: "验证当新密码长度不足8位时，接口返回参数错误响应，业务码为400"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "修改密码功能"
    tag: ["异常场景", "功能测试"]
    pytest_mark: ""
  steps:
    request:
      method: "PUT"
      url: "/user/changePassword"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json:
        username: "test_user"
        password: "short"
        id: 1
        userType: "user"
    expected:
      status_code: 200
      response:
        code: 400
        msg: "密码长度至少8位"
        data: {}
        assert:
          eq:
            code: 400
            msg: "密码长度至少8位"
          type:
            code: int
            msg: str
            data: dict

change_password_boundary_password_length_min:
  allure:
    title: "修改密码-边界场景-密码长度最小值"
    description: "验证当新密码长度为最小允许长度（8位）时，接口返回成功响应"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "修改密码功能"
    tag: ["边界场景", "功能测试"]
    pytest_mark: ""
  steps:
    request:
      method: "PUT"
      url: "/user/changePassword"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json:
        username: "test_user"
        password: "Abc12345"
        id: 1
        userType: "user"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "密码修改成功"
        data: {}
        assert:
          eq:
            code: 200
            msg: "密码修改成功"
          type:
            code: int
            msg: str
            data: dict