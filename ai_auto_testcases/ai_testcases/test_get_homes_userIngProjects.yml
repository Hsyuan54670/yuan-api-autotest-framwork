getuseringprojects_normal_with_data:
  allure:
    title: "获取用户进行中项目-正常场景-返回非空项目列表"
    description: "验证已登录用户调用接口，返回200状态码，业务响应码200，data.records包含非空项目列表，列表中每个项目包含必要字段且数据类型正确"
    epic: "项目管理平台"
    feature: "项目查询模块"
    story: "用户进行中项目查询"
    tag: ["正常场景", "功能测试"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "GET"
      url: "/homes/userIngProjects"
      headers:
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "OK"
        data:
          required_fields: ["records"]
          assert:
            type:
              records: list
          list_check:
            records:
              every_item_required_fields:
                - "id"
                - "projectName"
                - "projectType"
                - "applicant"
                - "funds"
                - "status"
    extract:
      project_id_0: $.data.records[0].id
      project_name_0: $.data.records[0].projectName

getuseringprojects_normal_empty_data:
  allure:
    title: "获取用户进行中项目-正常场景-返回空项目列表"
    description: "验证已登录用户无进行中项目时，接口返回200状态码，业务响应码200，data.records为空列表"
    epic: "项目管理平台"
    feature: "项目查询模块"
    story: "用户进行中项目查询"
    tag: ["正常场景", "边界测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "GET"
      url: "/homes/userIngProjects"
      headers:
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "OK"
        data:
          required_fields: ["records"]
          assert:
            type:
              records: list
          list_check:
            records:
              length: 0

getuseringprojects_abnormal_unauthorized:
  allure:
    title: "获取用户进行中项目-异常场景-未认证访问"
    description: "验证未登录用户调用接口，返回401状态码，业务响应码401，提示未授权信息"
    epic: "项目管理平台"
    feature: "项目查询模块"
    story: "用户进行中项目查询"
    tag: ["异常场景", "安全测试"]
    pytest_mark: "security"
  steps:
    request:
      method: "GET"
      url: "/homes/userIngProjects"
      headers: {}
      params: {}
      json: {}
    expected:
      status_code: 401
      response:
        code: 401
        msg: "Unauthorized"
        data: {}