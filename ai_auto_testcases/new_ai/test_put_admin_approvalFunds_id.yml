approval_funds_normal_success:
  allure:
    title: "通过经费审批-正常场景-审批通过申请成功"
    description: "验证管理员审核通过经费申请，接口返回成功响应，业务码为200，返回提示信息为success"
    epic: "项目管理平台"
    feature: "经费审批模块"
    story: "通过经费审批"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "PUT"
      url: "/admin/approvalFunds/2001"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        comment: "同意"
        appliedFunds: 5000.0
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            contains:
              msg: "success"

approval_funds_abnormal_missing_comment:
  allure:
    title: "通过经费审批-异常场景-审批意见缺失"
    description: "验证管理员提交审批时未填写审批意见，接口应返回参数校验失败，业务码400"
    epic: "项目管理平台"
    feature: "经费审批模块"
    story: "通过经费审批"
    tag: ["异常场景", "参数校验"]
    pytest_mark: ""
  steps:
    request:
      method: "PUT"
      url: "/admin/approvalFunds/2001"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        appliedFunds: 5000.0
    expected:
      status_code: 200
      response:
        code: 400
        msg: "comment不能为空"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            contains:
              msg: "不能为空"

approval_funds_abnormal_invalid_id:
  allure:
    title: "通过经费审批-异常场景-申请ID不存在"
    description: "验证使用无效的申请ID进行审批操作，接口应返回对应错误提示或400状态"
    epic: "项目管理平台"
    feature: "经费审批模块"
    story: "通过经费审批"
    tag: ["异常场景", "边界值测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/admin/approvalFunds/999999"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        comment: "同意"
        appliedFunds: 5000.0
    expected:
      status_code: 200
      response:
        code: 400
        msg: "申请不存在"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            contains:
              msg: "存在"

approval_funds_boundary_max_amount:
  allure:
    title: "通过经费审批-边界场景-审批金额为最大允许值"
    description: "验证审批金额为系统允许的最大合理数值时，接口能正确处理并返回成功"
    epic: "项目管理平台"
    feature: "经费审批模块"
    story: "通过经费审批"
    tag: ["边界场景", "数值边界"]
    pytest_mark: ""
  steps:
    request:
      method: "PUT"
      url: "/admin/approvalFunds/2001"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        comment: "同意"
        appliedFunds: 9999999.99
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            type:
              appliedFunds: float