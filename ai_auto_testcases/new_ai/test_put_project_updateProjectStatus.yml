update_project_status_normal_in_progress:
  allure:
    title: "更新项目状态-正常场景-项目状态更新为进行中"
    description: "验证管理员可以将项目状态成功更新为进行中，接口返回业务码200，响应数据正确"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
        newStatus: 1
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
        assert:
          eq:
            code: 200
            msg: "success"
    extract: {}

update_project_status_normal_completed:
  allure:
    title: "更新项目状态-正常场景-项目状态更新为已完成"
    description: "验证管理员可以将项目状态成功更新为已完成，接口返回业务码200"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["正常场景", "功能测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
        newStatus: 2
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
        assert:
          eq:
            code: 200
            msg: "success"

update_project_status_abnormal_status_invalid:
  allure:
    title: "更新项目状态-异常场景-新状态值非法"
    description: "验证当传入非法状态值（如4）时，接口应拒绝请求并返回业务码400"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["异常场景", "边界值测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
        newStatus: 4
    expected:
      status_code: 200
      response:
        code: 400
        msg: "参数错误"
        assert:
          eq:
            code: 400
          contains:
            msg: "状态"

update_project_status_abnormal_id_not_exist:
  allure:
    title: "更新项目状态-异常场景-项目ID不存在"
    description: "验证当传入不存在的项目ID时，接口应返回业务码400"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["异常场景", "负向测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 9999
        newStatus: 1
    expected:
      status_code: 200
      response:
        code: 400
        msg: "项目不存在"
        assert:
          eq:
            code: 400
          contains:
            msg: "存在"

update_project_status_abnormal_missing_newStatus:
  allure:
    title: "更新项目状态-异常场景-缺少newStatus字段"
    description: "验证当请求体中缺少newStatus字段时，接口应校验失败并返回400"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["异常场景", "参数缺失"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
    expected:
      status_code: 200
      response:
        code: 400
        msg: "参数错误"
        assert:
          eq:
            code: 400
          contains:
            msg: "参数"

update_project_status_abnormal_missing_id:
  allure:
    title: "更新项目状态-异常场景-缺少id字段"
    description: "验证当请求体中缺少id字段时，接口应校验失败并返回400"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["异常场景", "参数缺失"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        newStatus: 1
    expected:
      status_code: 200
      response:
        code: 400
        msg: "参数错误"
        assert:
          eq:
            code: 400
          contains:
            msg: "参数"

update_project_status_boundary_status_min:
  allure:
    title: "更新项目状态-边界场景-状态值为最小合法值0（待审核）"
    description: "验证项目状态可被更新为最小合法值0（待审核）"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["边界场景", "边界值测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
        newStatus: 0
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        assert:
          eq:
            code: 200

update_project_status_boundary_status_max:
  allure:
    title: "更新项目状态-边界场景-状态值为最大合法值3（已驳回）"
    description: "验证项目状态可被更新为最大合法值3（已驳回）"
    epic: "项目管理平台"
    feature: "项目状态管理模块"
    story: "更新项目状态"
    tag: ["边界场景", "边界值测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "PUT"
      url: "/project/updateProjectStatus"
      headers:
        Content-Type: "application/json"
        Authorization: "${admin_token}"
      json:
        id: 1001
        newStatus: 3
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        assert:
          eq:
            code: 200