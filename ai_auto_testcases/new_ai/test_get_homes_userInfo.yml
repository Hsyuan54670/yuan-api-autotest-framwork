get_user_info_normal_success:
  allure:
    title: 获取用户信息-正常场景-成功获取当前登录用户信息
    description: 验证已登录用户调用获取用户信息接口，能正常返回用户基本信息，业务响应码为200
    epic: 用户中心系统
    feature: 用户信息模块
    story: 获取用户信息
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: smoke
  steps:
    request:
      method: GET
      url: /homes/userInfo
      headers:
        Authorization: "${login_token}"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: ["id", "username", "userType"]
          assert:
            type:
              id: int
              username: str
              userType: str
            contains:
              userType: "user"
    extract:
      current_user_id: $.data.id
      current_username: $.data.username

get_user_info_abnormal_unauthorized:
  allure:
    title: 获取用户信息-异常场景-未携带Token访问被拒绝
    description: 验证未登录用户调用获取用户信息接口时，因缺少认证Token被拒绝访问，返回401或400
    epic: 用户中心系统
    feature: 用户信息模块
    story: 获取用户信息
    tag: ["异常场景", "安全测试"]
    pytest_mark: regression
  steps:
    request:
      method: GET
      url: /homes/userInfo
      headers: {}
    expected:
      status_code: 400
      response:
        code: 400
        msg: "请求失败"
        data: null