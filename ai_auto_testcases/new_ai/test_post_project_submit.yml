project_submit_normal_valid_data:
  allure:
    title: "提交项目-正常场景-使用有效数据提交项目成功"
    description: "验证用户使用完整且合法的项目信息提交项目申请，接口返回成功响应，业务码为200"
    epic: "项目管理平台"
    feature: "项目申请模块"
    story: "提交项目申请"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "POST"
      url: "/project/submit"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        projectName: "科研项目B"
        projectType: "技术开发类"
        applicant: "李四"
        applicantId: 1002
        funds: 80000.0
        remainingFunds: 80000.0
        content: "开发基于AI的自动化测试工具"
        startTime: "2026-03-01T00:00:00"
        deadline: "2027-02-28T23:59:59"
        status: 0
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            contains:
              msg: "success"
    extract:
      project_id: $.data.id

project_submit_abnormal_missing_project_name:
  allure:
    title: "提交项目-异常场景-缺少项目名称提交失败"
    description: "验证当请求体中缺少必填字段projectName时，接口正确返回400错误，业务码为400"
    epic: "项目管理平台"
    feature: "项目申请模块"
    story: "提交项目申请"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/project/submit"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        projectType: "科研类"
        applicant: "张三"
        applicantId: 1001
        funds: 50000.0
        remainingFunds: 50000.0
        content: "人工智能医疗应用研究"
        startTime: "2026-01-01T00:00:00"
        deadline: "2026-12-31T23:59:59"
        status: 0
    expected:
      status_code: 400
      response:
        code: 400
        msg: "项目名称不能为空"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            contains:
              msg: "项目名称不能为空"

project_submit_abnormal_invalid_status:
  allure:
    title: "提交项目-异常场景-状态值非法提交失败"
    description: "验证当提交项目时status字段传入非法值（如5）时，接口应拒绝请求并返回400错误"
    epic: "项目管理平台"
    feature: "项目申请模块"
    story: "提交项目申请"
    tag: ["异常场景", "参数边界校验"]
    pytest_mark: "regression"
  steps:
    request:
      method: "POST"
      url: "/project/submit"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        projectName: "非法状态项目"
        projectType: "测试类"
        applicant: "王五"
        applicantId: 1003
        funds: 30000.0
        remainingFunds: 30000.0
        content: "测试非法状态提交"
        startTime: "2026-04-01T00:00:00"
        deadline: "2026-06-30T23:59:59"
        status: 5
    expected:
      status_code: 400
      response:
        code: 400
        msg: "项目状态不合法"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            regex:
              msg: "^.*(状态|非法).*$"

project_submit_boundary_max_funds:
  allure:
    title: "提交项目-边界场景-申请最大允许经费金额"
    description: "验证用户提交项目时申请系统允许的最大经费金额（如9999999.99），接口能正确处理并返回成功"
    epic: "项目管理平台"
    feature: "项目申请模块"
    story: "提交项目申请"
    tag: ["边界场景", "数值边界测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: "POST"
      url: "/project/submit"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        projectName: "高额经费项目"
        projectType: "重大专项"
        applicant: "赵六"
        applicantId: 1004
        funds: 9999999.99
        remainingFunds: 9999999.99
        content: "国家级重点科研项目"
        startTime: "2026-01-01T00:00:00"
        deadline: "2028-12-31T23:59:59"
        status: 0
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            type:
              data: dict