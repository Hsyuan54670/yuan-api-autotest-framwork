delete_project_normal_success:
  allure:
    title: "删除项目-正常场景-成功删除指定项目"
    description: "验证管理员可以成功删除一个存在的项目，接口返回业务码200，删除成功"
    epic: "项目管理平台"
    feature: "项目管理模块"
    story: "删除项目"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "DELETE"
      url: "/project/deleteProject/1001"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            contains:
              msg: "success"
    extract: {}

delete_project_abnormal_not_found:
  allure:
    title: "删除项目-异常场景-项目ID不存在"
    description: "验证当提供的项目ID不存在时，接口应正确处理并返回相应错误提示"
    epic: "项目管理平台"
    feature: "项目管理模块"
    story: "删除项目"
    tag: ["异常场景", "边界值测试"]
    pytest_mark: ""
  steps:
    request:
      method: "DELETE"
      url: "/project/deleteProject/999999"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 400
        msg: "请求失败"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            contains:
              msg: "失败"

delete_project_abnormal_invalid_id_type:
  allure:
    title: "删除项目-异常场景-ID为非整数类型"
    description: "验证当path参数id传入非法类型（如字符串）时，接口的异常处理能力"
    epic: "项目管理平台"
    feature: "项目管理模块"
    story: "删除项目"
    tag: ["异常场景", "类型校验"]
    pytest_mark: ""
  steps:
    request:
      method: "DELETE"
      url: "/project/deleteProject/abc"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 400
      response:
        code: 400
        msg: "请求参数不合法"
        data:
          required_fields: []
          assert:
            eq:
              code: 400
            contains:
              msg: "参数不合法"

delete_project_boundary_min_id:
  allure:
    title: "删除项目-边界场景-最小有效ID值"
    description: "验证当项目ID为系统允许的最小合法值时，接口能否正确处理"
    epic: "项目管理平台"
    feature: "项目管理模块"
    story: "删除项目"
    tag: ["边界场景", "回归用例"]
    pytest_mark: "regression"
  steps:
    request:
      method: "DELETE"
      url: "/project/deleteProject/1"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            contains:
              msg: "success"

delete_project_without_auth:
  allure:
    title: "删除项目-异常场景-未携带认证Token"
    description: "验证未登录用户尝试删除项目时，接口是否拒绝访问并返回401或对应权限不足提示"
    epic: "项目管理平台"
    feature: "项目管理模块"
    story: "删除项目"
    tag: ["异常场景", "安全校验"]
    pytest_mark: ""
  steps:
    request:
      method: "DELETE"
      url: "/project/deleteProject/1001"
      headers:
        Content-Type: "application/json"
      params: {}
      json: {}
    expected:
      status_code: 401
      response:
        code: 401
        msg: "用户未认证"
        data:
          required_fields: []
          assert:
            eq:
              code: 401
            contains:
              msg: "未认证"