add_account_normal_success:
  allure:
    title: "新增账号-正常场景-创建新账号成功"
    description: "验证管理员使用合法参数创建新账号，接口返回成功响应，业务码为200"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        username: "testuser"
        password: "Test@123456"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: []
          assert:
            eq:
              code: 200
            contains:
              msg: "success"
    extract:
      created_username: $.request.body.username

add_account_abnormal_missing_username:
  allure:
    title: "新增账号-异常场景-缺少用户名参数"
    description: "验证创建账号时未提供用户名，接口应返回参数错误，业务码为400"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        password: "Test@123456"
    expected:
      status_code: 200
      response:
        code: 400
        msg: "请求参数无效"
        data:
          assert:
            eq:
              code: 400
            contains:
              msg: "username"
    extract: {}

add_account_abnormal_missing_password:
  allure:
    title: "新增账号-异常场景-缺少密码参数"
    description: "验证创建账号时未提供密码，接口应返回参数错误，业务码为400"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        username: "testuser"
    expected:
      status_code: 200
      response:
        code: 400
        msg: "请求参数无效"
        data:
          assert:
            eq:
              code: 400
            contains:
              msg: "password"
    extract: {}

add_account_abnormal_duplicate_username:
  allure:
    title: "新增账号-异常场景-用户名已存在"
    description: "验证使用已存在的用户名创建账号，接口应返回用户已存在错误，业务码为400"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["异常场景", "唯一性校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        username: "admin"
        password: "NewPass@123"
    expected:
      status_code: 200
      response:
        code: 400
        msg: "用户名已存在"
        data:
          assert:
            eq:
              code: 400
            contains:
              msg: "用户名已存在"
    extract: {}

add_account_boundary_min_password_length:
  allure:
    title: "新增账号-边界场景-密码长度低于最小限制"
    description: "验证密码长度不足（如少于6位）时，接口应拒绝创建账号并返回400"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["边界场景", "输入长度校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        username: "newuser"
        password: "123"
    expected:
      status_code: 200
      response:
        code: 400
        msg: "密码长度不能少于6位"
        data:
          assert:
            eq:
              code: 400
            contains:
              msg: "密码长度"
    extract: {}

add_account_boundary_max_username_length:
  allure:
    title: "新增账号-边界场景-用户名长度达到上限"
    description: "验证用户名为最大允许长度（如50字符）时能否成功创建"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "新增账号"
    tag: ["边界场景", "输入长度校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/admin/addAccount"
      headers:
        Content-Type: "application/json"
        Authorization: "${token}"
      json:
        username: "a123456789b123456789c123456789d123456789e123456789"
        password: "Test@123456"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          assert:
            eq:
              code: 200
    extract: {}