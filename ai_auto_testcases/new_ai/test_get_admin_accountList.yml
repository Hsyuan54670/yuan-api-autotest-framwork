get_account_list_normal_success:
  allure:
    title: "获取账号列表-正常场景-成功返回账号列表"
    description: "验证管理员用户在已登录状态下，调用获取账号列表接口，能够成功返回账号列表数据，业务响应码为200"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "获取账号列表"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: GET
      url: /admin/accountList
      headers:
        Authorization: "${login_token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: ["list", "total", "pageNum", "pageSize"]
          assert:
            type:
              list: list
              total: int
              pageNum: int
              pageSize: int
          list_check:
            list:
              length: 5
              every_item_required_fields:
                - "id"
                - "username"
                - "userType"
    extract:
      account_list: $.data.list

get_account_list_abnormal_unauthorized:
  allure:
    title: "获取账号列表-异常场景-未登录访问被拒绝"
    description: "验证未携带Token时调用获取账号列表接口，系统应拒绝访问并返回401未授权错误"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "获取账号列表"
    tag: ["异常场景", "安全测试"]
    pytest_mark: "regression"
  steps:
    request:
      method: GET
      url: /admin/accountList
      headers: {}
      params: {}
      json: {}
    expected:
      status_code: 401
      response:
        code: 401
        msg: "Unauthorized"
        data:
          assert:
            eq:
              msg: "Token缺失或无效"

get_account_list_boundary_empty_list:
  allure:
    title: "获取账号列表-边界场景-无账号数据时返回空列表"
    description: "验证当系统中无任何账号时，获取账号列表接口应返回空列表但状态正常"
    epic: "用户中心系统"
    feature: "账号管理模块"
    story: "获取账号列表"
    tag: ["边界场景", "数据兼容性"]
    pytest_mark: "regression"
  steps:
    request:
      method: GET
      url: /admin/accountList
      headers:
        Authorization: "${login_token}"
      params: {}
      json: {}
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: ["list", "total", "pageNum", "pageSize"]
          assert:
            eq:
              total: 0
            type:
              list: list
              pageNum: int
              pageSize: int
          list_check:
            list:
              length: 0