user_login_normal_correct_credentials:
  allure:
    title: "用户账号密码登录-正常场景-正确凭证登录成功"
    description: "验证用户使用正确的用户名、密码和用户类型进行登录，接口返回200状态码及登录token"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["正常场景", "冒烟用例"]
    pytest_mark: "smoke"
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        username: "admin"
        password: "123456"
        userType: "admin"
    expected:
      status_code: 200
      response:
        code: 200
        msg: "success"
        data:
          required_fields: ["token", "userId", "username", "userType"]
          assert:
            eq:
              userType: "admin"
            type:
              token: str
              userId: int
              username: str
    extract:
      login_token: $.data.token
      login_user_id: $.data.userId

user_login_abnormal_missing_username:
  allure:
    title: "用户账号密码登录-异常场景-缺少用户名"
    description: "验证用户登录时未提供用户名，接口应返回400状态码及参数错误提示"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        password: "123456"
        userType: "admin"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "参数缺失"
        data: {}

user_login_abnormal_missing_password:
  allure:
    title: "用户账号密码登录-异常场景-缺少密码"
    description: "验证用户登录时未提供密码，接口应返回400状态码及参数错误提示"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        username: "admin"
        userType: "admin"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "参数缺失"
        data: {}

user_login_abnormal_missing_userType:
  allure:
    title: "用户账号密码登录-异常场景-缺少用户类型"
    description: "验证用户登录时未提供用户类型，接口应返回400状态码及参数错误提示"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["异常场景", "必填项校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        username: "admin"
        password: "123456"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "参数缺失"
        data: {}

user_login_abnormal_invalid_userType:
  allure:
    title: "用户账号密码登录-异常场景-无效的用户类型"
    description: "验证用户登录时提供非法用户类型（如'userx'），接口应返回400状态码及校验失败提示"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["异常场景", "参数合法性校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        username: "admin"
        password: "123456"
        userType: "userx"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "用户类型不合法"
        data: {}

user_login_abnormal_wrong_password:
  allure:
    title: "用户账号密码登录-异常场景-密码错误"
    description: "验证用户登录时提供错误密码，接口应返回400状态码及登录失败提示"
    epic: "用户中心系统"
    feature: "用户认证模块"
    story: "账号密码登录"
    tag: ["异常场景", "业务规则校验"]
    pytest_mark: ""
  steps:
    request:
      method: "POST"
      url: "/login"
      headers:
        "Content-Type": "application/json"
      json:
        username: "admin"
        password: "wrong_password"
        userType: "admin"
    expected:
      status_code: 400
      response:
        code: 400
        msg: "账号或密码错误"
        data: {}